

# 串口通信协议

1. 串口板开机等待接收服务端消息。串口板持续向服务器发送上电信息，直到服务器返回配置信息。
2. 服务端通过UDP方式告知串口板使用的仪器号。
3. 串口板接收到仪器号，返回已经接收到仪器号的消息。
4. 串口板根据接收到的仪器号进行配置选择使用哪个串口，并设置固定的波特率，之后开启串口。
5. 串口板设置并开启串口成功之后返回消息给服务器。
6. 如果有仪器需要指令接入，则通过串口板发送控制指令，如果不需要指令，则直接将接收到的数据转发到服务器端。仪器的控制指令和心跳信息不需要传输到服务器。
7. 串口板如果接收到停止采集的指令则结束传输数据，自动重置。重新发送心跳信息并等待下一次的配置采集。


其他：串口板设置复位按钮，复位之后重新回到程序初始状态。

传输格式：（数据部分没有的为不填）
# 指令号 # 数据1 # 数据2 # 数据3 # 数据4 # 数据5 # 数据6 #

指令号：
    1   配置消息
    2   数据消息
    3   停止采集消息

数据格式
    1.配置使用的仪器：数据部分为仪器号，没有使用的不配置保留
    例子：
    服务端发送：#1#23#25####      表示本次采集使用仪器号为23和25的两台仪器
    串口板回复：#1#23#25####      回复相同的信息表示接收到配置信息

    2.数据消息：
    #指令号#仪器代号#监测数据#####
    #2#23#FE 32 23 23 56 FF 64 FE#####


    3.接收采集
    #3######    数据部分为空即可




